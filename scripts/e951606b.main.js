(function(){"use strict";angular.module("getserviceioApp",["ngCookies","ngResource","ngSanitize","ui.router","ngFileUpload","luegg.directives","ngClipboard","ngtimeago","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","ngClipProvider",function(a,b,c,d){d.setPath("//cdnjs.cloudflare.com/ajax/libs/zeroclipboard/2.1.6/ZeroClipboard.swf"),b.otherwise("/"),a.state("main",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl",auth:!1}),a.state("signin",{url:"/signin",templateUrl:"views/main.html",controller:"MainCtrl",auth:!1}).state("company",{url:"/company/:company",templateUrl:"views/main.html",controller:"MainCtrl",auth:!1}).state("companyref",{url:"/company/:company/src/:src/med/:med/cam/:cam",templateUrl:"views/main.html",controller:"MainCtrl",auth:!1}).state("ref",{url:"/src/:src/med/:med/cam/:cam",templateUrl:"views/main.html",controller:"MainCtrl",auth:!1}).state("terms",{url:"/terms",templateUrl:"views/terms.html",controller:"PrivacyTermsCtrl",auth:!1}).state("privacy",{url:"/privacy",templateUrl:"views/privacy.html",controller:"PrivacyTermsCtrl",auth:!1}).state("contact",{url:"/contact",templateUrl:"views/contact.html",controller:"ContactCtrl",auth:!1}).state("settings",{url:"/settings",templateUrl:"views/settings.html",controller:"SettingsCtrl",auth:!0}).state("messages",{url:"/cases",views:{"":{templateUrl:"views/messages.html",controller:"MessagesCtrl"},"ticketList@messages":{templateUrl:"views/messages/list.html"},"ticketComments@messages":{templateUrl:"/views/messages/comments.html"},"ticketDetail@messages":{templateUrl:"/views/messages/detail.html"}},auth:!0}).state("messages.id",{url:"/:id",views:{"":{templateUrl:"views/messages.html",controller:"MessagesCtrl"},"ticketList@messages":{templateUrl:"views/messages/list.html"},"ticketComments@messages":{templateUrl:"/views/messages/comments.html"},"ticketDetail@messages":{templateUrl:"/views/messages/detail.html"}},auth:!0})}]),angular.module("getserviceioApp").run(["$rootScope","$state","gslogin",function(a,b,c){a.$on("$stateChangeStart",function(a,d,e,f,g){d.auth&&!c.get()&&("messages.id"===d.name&&(c.redirectPath=e.id),b.transitionTo("signin"),a.preventDefault())})}])}).call(this),function(){"use strict";angular.module("getserviceioApp").filter("gscap",function(){return function(a){return null!==a?a.length<=3?a.toUpperCase():(a=a.toLowerCase(),a.substring(0,1).toUpperCase()+a.substring(1)):void 0}})}.call(this),function(){"use strict";angular.module("getserviceioApp").filter("gscapaddress",function(){return function(a){if(a&&null!==a)switch(a){case"address1":return a=a.substring(0,a.length-1),a.substring(0,1).toUpperCase()+a.substring(1);case"state_province":return a="State/Province";case"postal_code":return a="Zip/Postal Code";case"address2":return a="Address 2";default:return console.log(a),a=a.toLowerCase(),a.substring(0,1).toUpperCase()+a.substring(1)}}})}.call(this),function(){"use strict";angular.module("getserviceioApp").filter("gstel",function(){return function(a){var b,c,d,e;if(!a)return"";if(e=a.toString().trim().replace(/^\+/,""),e.match(/[^0-9]/))return a;if(10===e.length)c=1,b=e.slice(0,3),d=e.slice(3);else if(11===e.length)c=e[0],b=e.slice(1,4),d=e.slice(4);else{if(12!==e.length)return a;c=e.slice(0,3),b=e.slice(3,5),d=e.slice(5)}return 1===c&&(c=""),d=d.slice(0,3)+"-"+d.slice(3),(c+" ("+b+") "+d).trim()}})}.call(this),function(){"use strict";angular.module("getserviceioApp").filter("gsfieldmap",["gsgetfieldmap",function(a){return function(b,c,d){var e,f;return e=null,f=null,angular.forEach(a.set,function(a,b){return a===c?e=parseInt(b):void 0}),angular.forEach(b,function(a,b){return a.id&&a.id===e?f=a.value:void 0}),"company"!==c||f?f:"Ticket: "+d}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").filter("gsformaturl",function(){return function(a){return"undefined"!=typeof a?(a=a.toLowerCase(),a=a.replace(/\s+/g,"-")):void 0}})}.call(this),function(){"use strict";angular.module("getserviceioApp").filter("gsconfformat",function(){return function(a){return null!==a?"Date of Birth"===a?"Date of Birth (MM-DD-YYYY)":a:void 0}})}.call(this),function(){"use strict";angular.module("getserviceioApp").filter("gsformatsummary",function(){return function(a){var b;return"undefined"!=typeof a?(console.log("filter input"),console.log(a),a.indexOf("What Happened?")>-1?(b=a.split("What Happened?:"),b=b[1],b.indexOf("How did you find out about Service?")>-1&&(b=b.split("How did you find out about Service?"),b=b[0]),b):a):void 0}})}.call(this),function(){"use strict";angular.module("getserviceioApp").filter("gscapall",function(){return function(a,b){return a?a.replace(/([^\W_]+[^\s-]*) */g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()}):""}})}.call(this),function(){"use strict";angular.module("getserviceioApp").directive("gstooltip",function(){return{restrict:"A",link:function(a,b,c){$(b).hover(function(){$(b).tooltip("show")},function(){$(b).tooltip("hide")})}}})}.call(this),function(){"use strict";angular.module("getserviceioApp").directive("gscaseheight",["$window",function(a){return{link:function(b,c){b.calcHeight=function(){var b;a.innerWidth>768&&(b=a.innerHeight-76,$(c).css("height",b+"px"))},angular.element(a).bind("resize",function(){b.calcHeight()}),b.calcHeight()}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").directive("gscommentsheight",["$window",function(a){return{link:function(b,c){b.calcCommentsHeight=function(){var b;a.innerWidth>768&&(b=a.innerHeight-222-76,$(c).css("height",b+"px"))},angular.element(a).bind("resize",function(){b.calcCommentsHeight()}),b.calcCommentsHeight()}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").directive("gsformatdate",["$window",function(a){return{require:"?ngModel",link:function(a,b,c){return b.mask("99/99/9999",{placeholder:"MM/DD/YYYY"},{completed:function(){a.$apply()}})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsgoogle",["$rootScope","$location","$window",function(a,b,c){return{log:function(a,d){var e;return"pageview"===a?(console.log("Google Service, Log: Pageview for "+b.$$path),c.ga("send","pageview",b.$$path)):a&&d?(e=a+" : "+d,console.log("Google Service, Log: "+a+", "+d+", "+e),c.ga("send","event",a,d,e)):void 0}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gssvccompany",["$http","$q",function(a,b){return{get:function(c){var d,e,f,g;return d=b.defer(),e={query:{match_phrase_prefix:{Company_Name:{query:c,slop:10}}}},console.log("[GS Company Search]: Post object."),console.log(e),f={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},g=a({method:"POST",headers:f,url:"https://search.getservice.com:9200/companies/company/_search",data:e,crossdomain:!0,timeout:2e4}),g.success(function(a){a=a,d.resolve(a)}),g.error(function(a){d.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gssvcissue",["$http","$q",function(a,b){var c,d;return c={"Access-Control-Allow-Origin":"*","Content-Type":"application/json",Accept:"application/json"},d="https://search.getservice.com:9200/issues/issue/_search",{get:function(e,f){var g,h,i;return g=b.defer(),h=f?{query:{bool:{must:[{term:{Category:e?e:null}},{term:{"Sub-Category":f?f:null}}]}}}:{query:{bool:{must:[{term:{Category:e?e:null}}]}}},console.log("[GS Issue Search]: Post object."),console.log(h),i=a({method:"POST",headers:c,url:d,data:h,crossdomain:!0,timeout:2e4}),i.success(function(a){a=a,g.resolve(a)}),i.error(function(a){g.reject(a)})},getConfirmation:function(e,f,g){var h,i,j;return console.log("[GS Confirmation Search]: getconfirmation()"),console.log(e,f,g),h=b.defer(),i={query:{bool:{must:[{term:{Category:e?e:null}},{term:{"Sub-Category":f?f:null}},{term:{Issue:g?g:g}}]}}},console.log("[GS Confirmation Search]: Post object."),console.log(i),j=a({method:"POST",headers:c,url:d,data:i,crossdomain:!0,timeout:h}),j.success(function(a){a=a,h.resolve(a)}),j.error(function(a){h.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gssvcnew",["$rootScope","$http","$q",function(a,b,c){var d,e;return d={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},e="https://api.getservice.com/zd/ticket",{subject:function(a){var b;return b=a.category?a.company+"-"+a.category:a.company},save:function(a){var f,g,h,i;return console.log("[New Service]: Create new service."),f=c.defer(),a=a,i=this.subject(a),console.log(i),g={subject:"New Case: "+i,company:a.company,category:a.category,subCategory:a.subCategory,description:a.description,confirmation:a.confirmation,tags:a.tags,want:a.want,needs:a.needs,upload_tokens:a.upload_tokens,utm_source:a.utm_source,referral_other:a.referral_other},console.log("[New Service]: Postobj"),console.log(g),h=b({method:"POST",headers:d,url:e,data:g,timeout:2e4}),h.success(function(a){a=a,f.resolve(a)}),h.error(function(a){f.reject(a)})},update:function(a){var f,g,h,i;return console.log("[New Service]: update()"),f=c.defer(),a=a,i=this.subject(a),g={subject:"New Case: "+i,company:a.company,category:a.category,subCategory:a.subCategory,issue:a.issue,description:a.description,resolution:a.resolution,confirmation:a.confirmation,attachments:a.attachments,tags:a.tags,upload_tokens:a.upload_tokens,utm_source:a.utm_source,referral_other:a.referral_other},g.id=a.id,console.log("[New Service]: Update() postobj:"),console.log(g),h=b({method:"PUT",headers:d,url:e+"/"+g.id,data:g,timeout:f}),h.success(function(a){a=a,f.resolve(a)}),h.error(function(a){f.reject(a)})},addQueue:function(b){return this.queue=b,a.$broadcast("newsvcQueue",b)},queue:{}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gslogin",["$http","$q","$cookies",function(a,b,c){return{submit:function(c,d){var e,f,g,h;return console.log("[Login]: Sign in."),e=b.defer(),f={username:c,password:d},g={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},h=a({method:"POST",headers:g,url:"https://api.getservice.com/zd/login",data:f,crossdomain:!0,timeout:2e4}),h.success(function(a){console.log("[Login]: User login successful, getting user info."),console.log("username: "+c.username),e.resolve(a)}),h.error(function(a){console.log("[Login]: Error!"),e.reject(a)})},get:function(){var a,b,d;return d=c.get("gs.id"),b=c.get("gs.t"),a=c.get("gs.n"),b&&d?{user:window.atob(d),token:b,name:window.atob(a)}:!1},set:function(a,b,d){return c.put("gs.id",a,365),c.put("gs.t",b,365),c.put("gs.n",d,365)},logout:function(){return c.remove("gs.id"),c.remove("gs.t"),c.remove("gs.n")},redirectPath:null}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsregister",["$http","$q",function(a,b){return{save:function(c){var d,e,f,g;return console.log("[New User]: Create new user."),d=b.defer(),e={name:c.name,email:c.email},console.log("***** register"),console.log(e),f={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},g=a({method:"POST",headers:f,url:"https://api.getservice.com/zd/user",data:e,crossdomain:!0,timeout:2e4}),g.success(function(a){console.log("[New User]: User created successfully."),a=a,d.resolve(a)}),g.error(function(a){console.log("[New User]: Error!"),console.log(a),d.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gspassword",["$http","$q",function(a,b){return{set:function(c,d){var e,f,g,h,i,j;return console.log("[Set Password]: set()."),e=b.defer(),i=c,j=d,i&&j||e.reject("Username or password not provided."),f={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},g={password:j},h=a({method:"POST",headers:f,url:"https://api.getservice.com/zd/user/"+i+"/password",crossdomain:!0,data:g,timeout:2e4}),h.success(function(a){console.log("[Set Password]: Password set successfully."),a=a,e.resolve(a)}),h.error(function(a){console.log("[Set Password]: Error!"),e.reject(a)})},update:function(c,d,e,f){var g,h,i,j,k,l,m;return console.log("[Set Password]: update()."),g=b.defer(),k=c,m=e,l=f,k&&m&&l||g.reject("Username or password not provided."),h={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},i={email:m,oldpassword:m,newpassword:l},j=a({method:"PUT",headers:h,url:"https://api.getservice.com/zd/user/"+k+"/password",crossdomain:!0,data:i,timeout:2e4}),j.success(function(a){console.log("[Set Password]: Password set successfully."),a=a,g.resolve(a)}),j.error(function(a){console.log("[Set Password]: Error!"),g.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsgettickets",["$http","$q",function(a,b){return{get:function(c){var d,e,f;return console.log("[Get Tickets]: Get all tickets associated with user."),d=b.defer(),e={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},f=a({method:"GET",headers:e,url:"https://api.getservice.com/zd/tickets/"+c,crossdomain:!0,timeout:2e4}),f.success(function(a){console.log("[Get Tickets]: Tickets found."),a=a,d.resolve(a)}),f.error(function(a){console.log("[Get Tickets]: Error!"),console.log(a),d.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsassociate",["$http","$q",function(a,b){return{set:function(c,d){var e,f,g,h,i;return console.log("[New User]: Associate user with new ticket."),e=b.defer(),f={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},h=d,i=c,g=a({method:"PUT",headers:f,url:"https://api.getservice.com/zd/ticket/"+h+"/"+i,crossdomain:!0,timeout:2e4}),g.success(function(a){console.log("[Associate Ticket]: User "+i+" associated with ticket "+h),a=a,e.resolve(a)}),g.error(function(a){console.log("[Associate Ticket]: Error!"),console.log(a),e.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsgetticketdetail",["$http","$q",function(a,b){return{get:function(c){var d,e,f;return console.log("[Get Ticket Detail]: Get ticket detail."),d=b.defer(),e={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},f=a({method:"GET",headers:e,url:"https://api.getservice.com/zd/ticket/"+c,crossdomain:!0,timeout:2e4}),f.success(function(a){console.log("[Get Ticket Detail]: Ticket detail found."),a=a,d.resolve(a)}),f.error(function(a){console.log("[Get Ticket Detail]: Error!"),console.log(a),d.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsgetticketcomments",["$http","$q",function(a,b){return{get:function(c){var d,e,f;return console.log("[Get Ticket Detail]: Get ticket comments."),d=b.defer(),e={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},f=a({method:"GET",headers:e,url:"https://api.getservice.com/zd/comments/"+c,crossdomain:!0,timeout:2e4}),f.success(function(a){console.log("[Get Ticket Comments]: Ticket comments found."),a=a,d.resolve(a)}),f.error(function(a){console.log("[Get Ticket Comments]: Error!"),console.log(a),d.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsaddticketcomment",["$http","$q",function(a,b){return{add:function(c,d,e,f){var g,h,i,j;return console.log("[Add Ticket Comment]: Add comment: "+d+"."),d||(d="attachment"),g=b.defer(),i={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},h={ticketId:c,comment:d,authorId:e,upload_tokens:f},console.log(h),j=a({method:"POST",headers:i,url:"https://api.getservice.com/zd/comment",data:h,crossdomain:!0,timeout:2e4}),j.success(function(a){console.log("[Add Ticket Comment]: Ticket comment added."),a=a,g.resolve(a)}),j.error(function(a){console.log("[Add Ticket Comment]: Error!"),console.log(a),g.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsgetfieldmap",["$http","$q",function(a,b){return{get:function(){var c,d,e;return console.log("[Field Map]: get()"),c=b.defer(),d={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},e=a({method:"GET",headers:d,url:"https://api.getservice.com/zd/fieldMap",crossdomain:!0,timeout:2e4}),e.success(function(a){console.log("[Field Map]: Field Map loaded successfully."),a=a,c.resolve(a)}),e.error(function(a){console.log("[Field Map]: Error!"),console.log(a),c.reject(a)})},set:null}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsgetuser",["$http","$q",function(a,b){return{get:function(c){var d,e,f;return console.log("[User]: get()"),d=b.defer(),e={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},f=a({method:"GET",headers:e,url:"https://api.getservice.com/zd/user/"+c,crossdomain:!0,timeout:2e4}),f.success(function(a){console.log("[User]: User details loaded."),a=a,d.resolve(a)}),f.error(function(a){console.log("[User]: Error!"),console.log(a),d.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsgetemail",["$http","$q",function(a,b){return{get:function(c){var d,e,f;return console.log("[User]: get()"),d=b.defer(),e={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},f=a({method:"GET",headers:e,url:"https://api.getservice.com/zd/user?email="+c,crossdomain:!0,timeout:2e4}),f.success(function(a){console.log("[User]: User details loaded."),a=a,d.resolve(a)}),f.error(function(a){console.log("[User]: Error!"),console.log(a),d.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsupdateuser",["$http","$q",function(a,b){var c,d;return c={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},d="https://api.getservice.com/zd/user/",{addAccount:function(e,f){var g,h,i;return console.log("[User]: add account to object",f),g=b.defer(),f=JSON.stringify(f),h={accounts:btoa(f)},i=a({method:"PUT",headers:c,url:d+e,data:h,crossdomain:!0,timeout:2e4}),i.success(function(a){console.log("[User]: User details modified successfully."),a=a,g.resolve(a)}),i.error(function(a){console.log("[User]: Error updating user details!"),console.log(a),g.reject(a)})},update:function(e,f,g,h){var i,j,k;return console.log("[User]: update "+f+" with a value of "+g),i=b.defer(),j={},"drivers_license_number"===f?j={drivers_license_number:g,drivers_license_state:h}:j[f]=g?g:null,console.log(j),k=a({method:"PUT",headers:c,url:d+e,data:j,crossdomain:!0,timeout:1e4}),k.success(function(a){console.log("[User]: User details modified successfully."),a=a,i.resolve(a)}),k.error(function(a){console.log("[User]: Error updating user details!"),console.log(a),i.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gscontactus",["$http","$q",function(a,b){return{send:function(c,d,e,f,g){var h,i,j,k;return console.log("[Contact us]: send: "+c+"."),h=b.defer(),j={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},i={name:c,email:d,phone:e,subject:f,message:g},console.log(i),k=a({method:"POST",headers:j,url:"https://api.getservice.com/contactUs",data:i,crossdomain:!0,timeout:2e4}),k.success(function(a){console.log("[Contact Us]: sent."),a=a,h.resolve(a)}),k.error(function(a){console.log("[Contact Us]: Error!"),console.log(a),h.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").service("gsremoveupload",["$http","$q",function(a,b){return{remove:function(c){var d,e,f;return console.log("[File Upload]: Remove uploaded file."),d=b.defer(),e={"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},f=a({method:"DELETE",headers:e,url:"https://api.getservice.com/zd/upload/"+c,crossdomain:!0,timeout:2e4}),f.success(function(a){console.log("[New User]: File removed successfully."),a=a,d.resolve(a)}),f.error(function(a){console.log("[New User]: Error!"),d.reject(a)})}}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").factory("gsviewport",function(){return{get:function(){var a;return a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,768>a}}})}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("GetserviceCtrl",["$scope","$rootScope","$window","$modal","$location","$state","$anchorScroll","gslogin","gsgetemail","gssvcnew","gsviewport",function(a,b,c,d,e,f,g,h,i,j,k){return a.showService=!1,a.showLogin=!1,a.pendingTicket=!1,a.anchorTop=function(){return k.get()<768?g():void 0},a.logout=function(){return h.logout(),a.checkLogin()},a.updateCookie=function(b){var c;return a.auth.name=b,c=h.get(),c.name=b,h.set(window.btoa(c.user),c.token,window.btoa(c.name))},a.checkLogin=function(){var b,c;return a.auth={},b=h.get(),b&&b.user&&b.token?(a.auth.loggedIn=!0,b.name.indexOf("null")>-1?c="Welcome":(c=b.name,c=c.split(" "),c=c[0]),a.auth.name=c,a.auth.id=b.user):a.auth.loggedIn=!1},a.closeConfirm=function(c){var e;return"thanks"!==a.svcActive?c&&!j.queue.id?(a.hideService(),a.hideLogin(),b.$broadcast("CLOSE_SVC")):(e=d.open({animation:!0,templateUrl:"/views/confirm.html",controller:"ConfirmCtrl",size:"sm"}),e.result.then(function(c){b.$broadcast("CLOSE_SVC"),a.hideService(),a.hideLogin()},function(){})):a.hideService()},a.backToService=function(){return a.showService=!0,a.showLogin=!1,a.toggleService("resolution")},a.gsBack=function(){return history.back()},a.hideService=function(){return a.showService=!1,a.showModal=!1,a.toggleService("company")},a.openService=function(){return a.showService=!0,a.showModal={height:"300px",overflow:"hidden"}},a.toggleLogin=function(b){return b?a.gsLoginForm="create":a.gsLoginForm="login"},a.toggleService=function(b){return a.svcActive=b,a.anchorTop()},a.hideLogin=function(){return a.showLogin=!1,a.showModal=!1},a.openLogin=function(b){return a.toggleLogin(b),a.showLogin=!0,a.showModal={height:"300px",overflow:"hidden"}},a.gotoCase=function(b){return a.hideService(),f.go("messages.id",{id:b})},b.$on("newsvcQueue",function(a){return window.onbeforeunload=function(a){return"Are you sure you want to close? If you don’t register or sign in we won’t be able to help you!"}}),b.$on("CLEAR_QUEUE",function(a){return window.onbeforeunload=null}),a.toggleService("company"),a.toggleLogin(),a.checkLogin()}])}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("MainCtrl",["$scope","$location","$stateParams","$http","$anchorScroll","$rootScope","$filter","gsgoogle","gssvccompany","gssvcissue",function(a,b,c,d,e,f,g,h,i,j){return"/signin"===b.$$path&&a.openLogin(),a.loc="/",a.main=[{sub:"Hold-music shouldn’t be the soundtrack to your life.",img:"main-1"},{sub:"Do the things you love, and let us worry about dealing with customer service.",img:"main-2"},{sub:"I love calling customer service...said no one ever.",img:"main-3"}],a.gsmainImg=Math.floor(3*Math.random()),a.gsFaqActive=0,a.gsFaqToggle=function(b){return a.gsFaqActive=b},a.scrollTo=function(a){return e(a)},a.gssvc=a.gssvc||{},a.newsvc=a.newsvc||{},a.gssvc.companyAutoSelect=function(b){var c;return console.log("[GS New Service]: Company category/subcategory auto lookup for "+b+"."),c=i.get(b),c.then(function(c){var d;return d=c.data.hits.hits,d&&d.length>0&&d[0]._source.Company_Name===b?(a.newsvc.subCategory=d[0]._source["Sub-Category"],a.newsvc.category=d[0]._source.Category,console.log("[GS New Service]: Company category/subcategory found for "+b+"."),void 0):(console.log("[GS New Service]: Company category/subcategory not found for "+b+"."),null)},function(a){return console.log("[GS New Service]: Company search encountered an error."),null})},a.gssvc.companySearch=function(b,c){var d;return 13!==b.keyCode?c?(console.log("[GS New Service]: Company search terms "+c+"."),d=i.get(c),d.then(function(b){a.gssvc.companyResults=b.data.hits.hits,b.data.hits.hits.length?a.gssvc.companyResultsNew=!1:a.gssvc.companyResultsNew=!0,a.newsvc.category=null,a.newsvc.issue=null,a.newsvc.subCategory=null,a.newsvc.needs=[],a.newsvc.want=null,a.gssvc.issueResults=null,a.gssvc.confResults=null},function(a){console.log("[GS New Service]: Company search encountered an error.")})):(a.gssvc.companyResults=null,a.gssvc.companyResultsNew=!1):a.gssvc.companySubmit()},a.gssvc.companySelect=function(b){var c,d;return d=a.gssvc.companyResults[b]._id,c=a.gssvc.companyResults[b]._source,console.log("[GS New Service]: company selected"+JSON.stringify(c)+", with an id of "+d+"."),a.gssvc.companyResults=null,a.newsvc.company=c.Company_Name,a.newsvc.category=c.Category,a.newsvc.subCategory=c["Sub-Category"]?c["Sub-Category"]:null,a.newsvc.companyId=d?d:null,a.newsvc.tags=c.tags?c.tags:null},a.gssvc.companySubmit=function(){var b;return console.log(a.newsvc),a.gssvc.errCompany=!1,a.gssvc.issueResults=null,a.newsvc.company&&a.newsvc.company.length>0?(a.svcSubmit=!0,console.log("[GS New Service]: Company continue, company is "+a.newsvc.company+"."),a.gssvc.companyResults=null,a.gssvc.companyResultsNew=!1,a.newsvc.category?(a.svcSubmit=!0,b=j.get(a.newsvc.category,a.newsvc.subCategory),b.then(function(b){a.gssvc.issueResults=b.data.hits.hits,a.gssvc.issueResults.length&&a.gssvc.issueResults.length>0?console.log("[GS New Service]: Issues: "+a.gssvc.issueResults.length+" issues found for category: "+a.newsvc.category+" and subcategory "+a.newsvc.subCategory+"."):console.log("[GS New Service]: Issues: no issues found."),f.$broadcast("COMPANY_SELECT",a.newsvc.company,a.newsvc.companyId,a.newsvc.category,a.gssvc.issueResults,a.newsvc.subCategory),a.svcSubmit=!1,a.openService(),a.toggleService("issue")},function(b){console.log("[GS New Service]: An error occurred when attempting to get issues, redirect to description page."),a.svcSubmit=!1})):(console.log("[GS New Service]: Company continue, no category specified."),f.$broadcast("COMPANY_SELECT",a.newsvc.company,null,null,null,null),a.gssvc.issueResults=null,a.gssvc.confResult=null,a.svcSubmit=!1,a.openService(),a.toggleService("issue"))):console.log("[GS New Service]: Company continue, company is undefined.")},a.initMain=function(){var b,d,e;return c&&c.company&&(e=c.company,d=e,console.log(d),d=g("gscapall")(d),console.log(d),a.newsvc.company=d,a.gssvc.autocompany=d,a.gssvc.companyAutoSelect(d)),c&&c.src&&c.med&&c.cam?(b=c,console.log("Ad Campaign Detected with utm_source: "+b.src+", utm_medium: "+b.med+", and utm_campaign: "+b.cam)):void 0},a.initMain(),a.faqs=[{q:"What is Service?",a:"Service helps consumers get what they deserve from businesses. Basically, you tell us about a problem you had with a business, and we fix it for you."},{q:"How much time does it take to use Service?",a:"About 30 seconds. Tell us the situation and give us any supporting documentation (such as an email confirmation, order #, etc.) that we might logically need to help us help you."},{q:"What are some examples of cases Service has handled?",a:"We've gotten non refundable airline tickets refunded (when there's a legit reason), delivery fees waived on late deliveries, appointment times prioritized, credits when bad service was provided at restaurants, and many more. You can see some examples on our homepage of real cases with real people."},{q:"Do you guarantee results?",a:"No. We are representing you (and the company you have an issue with) and work to reach a fair resolution for all. But since we aren't the company itself, we can't guarantee you anything except that we'll try very hard to get you what you want!"},{q:"I'm a business owner - how does Service help me?",a:"By helping your customers with their issues quickly, improving your brand's image in their mind. We aren't on the customer's side and we aren't on the business' side - we are a helpful, neutral third party that wants to find equitable resolution for issues that come up."},{q:'How do you define "reasonable issue?"',a:'We define a reasonable issue as an issue that arose where you did nothing wrong and were somehow "wronged" by the company. For example, if you took a flight and experienced a 5 hour delay because of a broken aircraft, you are an innocent victim and deserve compensation. If you took a flight and experienced a 5 minute delay, we would politely decline taking up your case.'},{q:"Where is Service located?",a:"Service is based in Los Angeles, CA, USA. Currently, we are available worldwide but our focus countries are the United States, Canada, and the United Kingdom."},{q:"How much do you sell my info for once you're done helping me?",a:"$0. We will never, ever sell or use your info for any reason except to help you resolve an issue. For more details, visit our privacy policy."},{q:"How can I trust you?",a:"In the words of Warren Buffett, it takes a lifetime to build a reputation, and only a minute to destroy it. We take our commitment to you very seriously, and we exist to help eliminate frustration between consumers and businesses. We are backed by some of the biggest tech investors in California. We're good guys, we promise!"},{q:"How much does Service cost?",a:"Service is free!"},{q:"What's your business model?",a:"We're a new company building a name for ourselves. At this time our services are completely free for consumers and businesses."},{q:"Where can I reach you on other channels?",a:'<a href="http://twitter.com/service" target="_blank">Twitter</a>, <a href="http://facebook.com/service" target="_blank">Facebook</a>, <a href="http://instagram.com/service" target="_blank">Instagram</a>, More coming soon :)'},{q:"Sounds too good to be true - what's the catch?",a:"There is none. We do like food and shelter and eventually will begin monetizing. For now, enjoy our high quality, easy-to-use service - and save yourself time and money."},{q:"I have an idea for Service, how can I reach you?",a:"We'd love to hear from you - visit our <a href='/#/contact'>contact us</a> page."},{q:"I want to work for Service, how do I contact you?",a:"Send us your resume and why you're passionate about customer service using our <a href='/#/contact'>contact us</a> form."}],a.carouselPrev=function(){var b,c;return b=($("#testimonials .active").index()+1)%slides.length,c=(b%slides.length+slides.length)%slides.length,a.slides[c].active=!0},a.carouselPrev=function(){var b,c;return b=($("#testimonials .active").index()-1)%slides.length,c=(b%slides.length+slides.length)%slides.length,a.slides[c].active=!0},h.log("pageview")}])}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("SettingsCtrl",["$scope","$filter","$location","gsgetuser","gsupdateuser","gspassword","gssvccompany","gslogin","gsgoogle",function(a,b,c,d,e,f,g,h,i){return a.loc=c.$$path,a.resetNewAcctModel=function(){return a.newAccount={name:null,number:null},a.showSetListAdd=!1},a.toggleAddAcct=function(b){return a.newAcctErrName=!1,a.newAcctErrNumber=!1,a.newPWErr=!1,a.resetNewAcctModel(),b?a.showSetListAdd=!0:a.showSetListAdd=!1},a.toggleAddAcct(),a.formatDate=function(a){var b,c;return a=new Date(a),c=("0"+(a.getUTCMonth()+1)).slice(-2),b=("0"+a.getUTCDate()).slice(-2),c+"/"+b+"/"+a.getUTCFullYear()},a.getUser=function(){var c,e;return a.settingObj=null,a.msgErrSettings=!1,console.log("[GS Settings]: get user()"),e=a.auth.id,c=d.get(e),c.then(function(c){console.log("[GS Settings]: get user successful"),a.settingObj={user:{name:c.data.name.indexOf("null")>-1?null:c.data.name,email:c.data.email,phone:c.data.phone?b("gstel")(c.data.phone):null,password:{}},address:{address1:c.data.user_fields.address1,address2:c.data.user_fields.address2,city:c.data.user_fields.city,state_province:c.data.user_fields.state_province,postal_code:c.data.user_fields.postal_code,country:c.data.user_fields.country},additional:{dob:c.data.user_fields.dob?a.formatDate(c.data.user_fields.dob):null,ssn_last_4:c.data.user_fields.ssn_last_4,drivers_license_number:c.data.user_fields.drivers_license_number,drivers_license_state:c.data.user_fields.drivers_license_state},accounts:a.getAccountObj(c.data.user_fields.accounts)}},function(b){console.log("[GS Settings]: Error."),a.msgErrSettings=!0,a.hideLoader=!0})},a.setPassword=function(){var b,c,d;return a.msgErrSettings=!1,a.msgErrSettingsPW=!1,a.svcSubmit?void 0:a.settingObj.user.password&&a.settingObj.user.password["new"]&&a.settingObj.user.password["new"].length>6?(a.svcSubmit=!0,
a.newPWErr=!1,b=h.get(),d=b.user,c=f.update(d,a.settingObj.user.email,a.settingObj.user.password.old,a.settingObj.user.password["new"]),c.then(function(b){a.svcSubmit=!1,a.settingObj.user.password={}},function(b){console.log("[GS Settings]: Error."),a.msgErrSettings=!0,a.svcSubmit=!1})):a.msgErrSettingsPW=!0},a.updateUser=function(c,d,f){var g,i,j,k;return a.svcSubmit?void 0:(a.svcSubmit=!0,console.log("[GS Settings]: update "+c+" with value "+d),g=h.get(),k=g.user,a.msgErrSettings=!1,"phone"===c&&b("gstel")(a.settingObj.user.phone),"dob"===c&&d&&(d=new Date(d),d=d.getTime()),"drivers_license_number"===c&&(d?i=a.settingObj.additional.drivers_license_state:(d=null,i=null)),j=e.update(k,c,d,i),j.then(function(b){a.svcSubmit=!1,"name"===c&&a.updateCookie(b.data.name)},function(b){console.log("[GS Settings]: Error."),a.msgErrSettings=!0,a.svcSubmit=!1}))},a.companySelect=function(b){return console.log("[GS Settings]: company select: "+b._source.Company_Name),a.newAccount.name=b._source.Company_Name,a.companyResults=null,a.companyResultsNew=!1},a.companySearch=function(){var b;return b=g.get(a.newAccount.name),b.then(function(b){a.companyResults=b.data.hits.hits,b.data.hits.hits.length?a.companyResultsNew=!1:a.companyResultsNew=!0,console.log(b)},function(a){console.log("[GS Settings]: Error on company search.")})},a.companyNew=function(){return a.companyResultsNew=!1,a.companyResults=!1},a.getAccountObj=function(a){return a?(a=atob(a),a=JSON.parse(a)):{}},a.updateAcct=function(){return a.svcSubmit?void 0:(a.svcSubmit=!0,a.updateAccount())},a.updateAccount=function(){var b,c,d;return c=h.get(),d=c.user,a.svcSubmit=!0,b=e.addAccount(d,a.settingObj.accounts),b.then(function(b){var c;c=a.getAccountObj(b.data.user_fields.accounts,c),a.settingObj.accounts=c,a.resetNewAcctModel(),a.svcSubmit=!1},function(b){console.log("[GS Settings]: Add account error!."),a.msgErrSettings=!0,a.svcSubmit=!1})},a.removeAcct=function(b,c){return a.svcSubmit?void 0:(a.svcSubmit=!0,angular.forEach(a.settingObj.accounts,function(d,e){return b===e&&c===d?(delete a.settingObj.accounts[e],console.log("match with: "+e+" "+d)):void 0}),a.updateAccount())},a.addAccount=function(){return console.log("[GS Settings]: add account "+a.newAccount.name+" with number: "+a.newAccount.number),a.newAcctErrName=!1,a.newAcctErrNumber=!1,a.svcSubmit?void 0:a.newAccount.name&&a.newAccount.number?(a.svcSubmit=!0,a.settingObj.accounts[a.newAccount.name]=a.newAccount.number,a.resetNewAcctModel(),a.updateAccount()):(a.newAccount.name?a.newAcctErrName=!1:a.newAcctErrName=!0,a.newAccount.number?a.newAcctErrNumber=!1:a.newAcctErrNumber=!0)},a.initSettings=function(){return a.getUser(),a.svcSubmit=!1,a.companyResultsNew=!1,i.log("pageview")},a.initSettings()}])}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("SupportCtrl",["$scope","$location","gsgoogle",function(a,b,c){return a.loc=b.$$path,a.initSupport=function(){return a.gsSupportActive=0},a.supportQuestions=[{q:"Lorem ipsum dolor sit amet, consectetur adipis?",a:"Maecenas interdum ex sed commodo accumsan. Interdum et malesuada fames ac ante ipsum primis in fauc ibus. Pellentesque tincidunt elem entu m nibh eget dignissim. Nullam purus magna, scelerisque no"},{q:"Lorem ipsum dolor sit amet, consectetur adipis?",a:"Maecenas interdum ex sed commodo accumsan. Interdum et malesuada fames ac ante ipsum primis in fauc ibus. Pellentesque tincidunt elem entu m nibh eget dignissim. Nullam purus magna, scelerisque no"},{q:"Lorem ipsum dolor sit amet, consectetur adipis?",a:"Maecenas interdum ex sed commodo accumsan. Interdum et malesuada fames ac ante ipsum primis in fauc ibus. Pellentesque tincidunt elem entu m nibh eget dignissim. Nullam purus magna, scelerisque no"}],c.log("pageview"),a.initSupport(),a.gsSupportToggle=function(b){return a.gsSupportActive=b}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("MessagesCtrl",["$scope","$state","$window","$q","$location","$timeout","$anchorScroll","$filter","$stateParams","Upload","gsgettickets","gsgetticketdetail","gsgetticketcomments","gsaddticketcomment","gsgetfieldmap","gsgetuser","gsviewport","gsgoogle",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){return a.loc=e.$$path,a.ticketActive=null,a.glued=!0,a.comment={},a.comment["new"]=null,a.comment.attachments=[],a.comment.send=!1,a.comment.listener=null,a.msgErrTickets=!1,a.msgErrComments=!1,a.msgErrDetails=!1,a.gsViewportWidth=q.get(),a.msgActive="list",a.refocusComment=!1,f.cancel(a.refreshAgentTimeout),a.resetCommentRep=function(){return a.commentRepId=null,a.commentRepIds=[],a.commentRep=null,a.commentRepUrl=null,a.commentRepRating=null,a.commentIds=[],a.getcommentIds=[]},a.resetCommentRep(),a.selectTicket=function(b){return b||(b=a.ticketActive),console.log("[Messages]: select ticket id: "+b),a.ticketActive=b,a.ticketComments=null,a.ticketDetails=null,f.cancel(a.comment.listener),a.resetCommentRep(),a.getTicketComments(b),a.getTicketDetails(b),a.isMobile?a.toggleViews("comments"):void 0},a.setCommentListener=function(){return f.cancel(a.comment.listener),a.comment.listener=f(function(){return console.log("[Message]: comment listener."),a.ticketActive?(console.log(a.ticketActive),a.getTicketComments(a.ticketActive,!0)):void 0},1e4)},a.sortComments=function(b,c){return console.log("[New Service]: Sort Comments."),b=b,c=c,angular.forEach(b,function(b,c){return-1===$.inArray(b.author_id,a.commentIds)?(a.commentIds.push(b.author_id),a.getcommentIds.push(p.get(b.author_id))):void 0}),d.all(a.getcommentIds).then(function(d){angular.forEach(d,function(b,c){return"admin"!==b.data.role&&"agent"!==b.data.role||1005003377===b.data.id?void 0:(a.commentRepRating=5,a.commentRepId=b.data.id,a.commentRep=b.data.name,a.commentRepUrl="/images/reps/"+b.data.name+".jpg")}),a.commentRep||(a.commentRep="API User",a.commentRepUrl="/images/reps/api-user.jpg"),a.ticketComments=b,a.getTicketDetails(c)},function(b){console.log("[Messages]: Error."),a.msgErrComments=!0,a.commentIds=[],a.getcommentIds=[]})},a.viewComments=function(){return a.toggleViews("comments")},a.commentSubmit=function(){var b,c;return console.log("[Messages]: submit comment"),!a.comment.send&&(a.refocusComment=!1,c=a.ticketComments.length,!a.comment.attachments.length&&a.comment["new"]&&(console.log("[Messages]: no attachments."),a.ticketComments[c]={},a.ticketComments[c].body=a.comment["new"],a.ticketComments[c].author_id=parseInt(a.auth.id),a.ticketComments[c]["public"]=!0),a.comment["new"]||a.comment.attachments.length>0)?(f.cancel(a.comment.listener),a.comment.send=!0,b=n.add(parseInt(a.ticketActive),a.comment["new"],parseInt(a.auth.id),a.comment.attachments),b.then(function(b){console.log("[Messages]: submit comment success"),a.getTicketComments(a.ticketActive,!0),a.comment.send=!1,a.comment["new"]=null,a.comment.attachments=[],a.uploadDisable=!1,a.refocusComment=!0},function(b){console.log("[Messages]: Error."),a.msgErrComments=!0,a.comment.send=!1,a.comment["new"]=null,a.comment.attachments=[],a.refocusComment=!0})):void 0},a.getTicketComments=function(b,c){var d;return console.log("get ticket comments"+b,c),a.msgErrComments=!1,d=m.get(b),d.then(function(d){var e;console.log(d),d.data.length>0&&(e=d.data[d.data.length-1],e&&e.created_at&&(a.ticketCommentsRes=e.created_at),c?a.ticketComments.length!==d.data.length?a.ticketComments=d.data:console.log("[Messages]: Comment interval, no new comments found."):a.sortComments(d.data,b,c)),a.setCommentListener()},function(b){console.log("[Messages]: Error."),c||(a.msgErrComments=!0)})},a.getTicketDetails=function(b){var c;return console.log("[Messages]: get ticket details id: "+b),a.msgErrDetails=!1,c=l.get(b),c.then(function(b){console.log("[Messages]: ticket details success!"),a.ticketDetails=b.data,a.ticketDetails.formatted_custom={},angular.forEach(a.ticketDetails.custom_fields,function(b,c){var d,e;return d=b.id,e=b.value,d&&e?angular.forEach(o.set,function(b,c){return c===d?a.ticketDetails.formatted_custom[b]=e:void 0}):void 0}),console.log(a.ticketDetails)},function(b){console.log("[Messages]: Error."),a.msgErrDetails=!0})},a.refreshAgent=function(){return console.log("[Messages]: refresh agent."),f.cancel(a.refreshAgentTimeout),a.refreshAgentTimeout=f(function(){a.selectTicket()},61e3)},a.getTickets=function(){var c;return a.msgErrTickets=!1,console.log("[Messages]: get tickets"),c=k.get(a.auth.id),c.then(function(c){var d,e,f,g,h;c.data.length&&c.data.length>0?(d=c.data,f=c.data.length-1,a.tickets=c.data.slice().reverse(),h=c.data[f].id,g=!1,b.params&&b.params.id&&(console.log("[Messages]: get tickets url param: "+b.params.id),e=parseInt(b.params.id),angular.forEach(c.data,function(c,d){return e===c.id?(h=b.params.id,g=!0,a.refreshAgent()):void 0})),(!a.isMobile||g)&&(a.ticketActive=h,a.getTicketComments(h),a.isMobile&&a.toggleViews("details"))):(a.tickets=[],a.ticketDetails=[],a.ticketComments=[])},function(b){console.log("[Messages]: Get tickets error."),a.msgErrTickets=!0,a.msgErrDetails=!0,a.msgErrComments=!0})},a.getFieldMap=function(){var b;return a.msgErrTickets=!1,console.log("[Messages]: get field map"),b=o.get(),b.then(function(b){console.log(b),o.set=b.data,a.getTickets()},function(b){console.log("[Messages]: Get field map error."),a.msgErrTickets=!0,a.msgErrDetails=!0,a.msgErrComments=!0})},a.toggleViews=function(b){return console.log("[Messages]: show view: "+b),a.msgActive=b,a.isMobile&&(a.toggle.comments=!1,a.toggle.details=!1,a.toggle.list=!1,a.toggle[b]=!0,"comments"===b)?(e.hash("comment-form"),g()):void 0},a.showTickets=function(){return console.log("show tickets"),a.ticketsLeft=0,a.ticketsPadding=0},a.formatTitle=function(a,b){return console.log("id: "+a+" company: "+b),b?b:a},a.uploadedFiles=[],a.confFiles=[],a.uploadDisable=!1,a.upload=function(b){var c;console.log("[New Service]: Attach file."),console.log(b),b&&!a.uploadDisable&&(a.uploadDisable=!0,a.comment.send=!0,a.fileProgress=0,c=a.uploadedFiles.length,j.upload({url:"https://api.getservice.com/zd/upload",file:b,dataType:"json"}).progress(function(b){console.log("[New Service]: upload processing."),a.fileProgress=parseInt(100*b.loaded/b.total)+"%"}).success(function(b,c,d,e){console.log("[New Service]: upload complete."),console.log(b),a.comment.send=!1,a.comment.attachments.push(b.upload_token),a.commentSubmit()}).error(function(b,c,d,e){console.log("[New Service]: upload error."),a.comment.send=!1,a.uploadDisable=!1,a.comment.attachments=[]}))},a.initMessages=function(){var b,c;return console.log("[Messages]: init"),c=!1,b=!1,a.isMobile=q.get(),a.toggle={},a.toggle.list=!0,o.set?a.getTickets():a.getFieldMap(),r.log("pageview")},a.$on("$destroy",function(b){f.cancel(a.comment.listener)}),angular.element(c).on("resize",function(b){return f.cancel(a.gsResize),a.gsResize=f(function(){return console.log(a.isMobile),a.isMobile=q.get()},10)}),a.initMessages()}])}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("NewserviceCtrl",["$scope","$rootScope","$location","$stateParams","$http","$q","gssvccompany","gssvcissue","gssvcnew","gsregister","gslogin","gsassociate","gsgoogle","Upload","gsremoveupload",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a.gssvc={model:function(){return console.log("service model"),a.newsvc={company:null,category:null,subCategory:null,company_id:null,upload_tokens:[],issue:null,description:null,resolution:null,confirmation:null,authorized:!1,tags:[],needs:[],want:null,id:null,utm_source:null,referral_other:null}},lookup:function(b){var c;return console.log("[GS New Service]: Company category/subcategory auto lookup for "+b+"."),c=g.get(b),c.then(function(c){var d;return d=c.data.hits.hits,d&&d.length>0&&d[0]._source.Company_Name===b?(a.newsvc.subCategory=d[0]._source["Sub-Category"],a.newsvc.category=d[0]._source.Category,console.log("[GS New Service]: Company category/subcategory found for "+b+"."),void 0):(console.log("[GS New Service]: Company category/subcategory not found for "+b+"."),null)},function(a){return console.log("[GS New Service]: Company search encountered an error."),null})},init:function(){var b;return console.log("[GS New Service]: initialize."),a.toggleService("company"),a.gssvc.error=null,a.gssvc.success=null,a.gssvc.authSubmitBtn="Submit",a.gssvc.model(),a.queue=null,a.gssvc.companyResults=null,a.gssvc.companyResultsNew=!1,a.gssvc.copyTxt="Copy Email",b=!1},prev:function(){if(console.log("[GS New Service]: Previous screen."),a.gssvc.error=null,a.gssvc.success=null,!a.svcSubmit)switch(a.svcActive){case"issue":return a.toggleService("company");case"confirmation":return a.toggleService("issue");case"auth":return a.toggleService("resolution");case"resolution":return a.newsvc.category&&a.newsvc.issue?(a.toggleService("issue"),a.gssvc.copyTxt="Copy Email"):a.toggleService("issue")}},next:function(b){switch(console.log("[GS New Service]: Next screen."),a.gssvc.error=null,a.gssvc.success=null,b){case"company":a.gssvc.companySubmit();break;case"issue":a.gssvc.issueSubmit();break;case"confirmation":a.gssvc.confSubmit();break;case"resolution":a.gssvc.resSubmit()}},reset:function(b){return console.log("[GS New Service]: Reset and hide."),a.gssvc.model(),a.gssvc.error=null,a.issueResults=null,a.gssvc.referrerSubmit=!1,b?a.closeConfirm():a.hideService()}},a.gssvc.init(),a.gssvc.companySearch=function(b,c){var d;return console.log("keyup",a.newsvc),13!==b.keyCode?c?(console.log("[GS New Service]: Company search terms "+c+"."),d=g.get(c),d.then(function(b){a.gssvc.companyResults=b.data.hits.hits,b.data.hits.hits.length?a.gssvc.companyResultsNew=!1:a.gssvc.companyResultsNew=!0,a.newsvc.category=null,a.newsvc.issue=null,a.newsvc.subCategory=null,a.newsvc.needs=[],a.newsvc.want=null,a.gssvc.issueResults=null,a.gssvc.confResults=null},function(a){console.log("[GS New Service]: Company search encountered an error.")})):(a.gssvc.companyResults=null,a.gssvc.companyResultsNew=!1):a.gssvc.companySubmit()},a.gssvc.companySelect=function(b){var c,d;return d=a.gssvc.companyResults[b]._id,c=a.gssvc.companyResults[b]._source,console.log("[GS New Service]: company selected"+JSON.stringify(c)+", with an id of "+d+"."),a.gssvc.companyResults=null,a.newsvc.company=c.Company_Name,a.newsvc.category=c.Category,a.newsvc.subCategory=c["Sub-Category"]?c["Sub-Category"]:null,a.newsvc.companyId=d?d:null,a.newsvc.tags=c.tags?c.tags:null},a.gssvc.companySubmit=function(){var b;return console.log(a.newsvc),a.gssvc.errCompany=!1,a.newsvc.company&&a.newsvc.company.length>0?(console.log("[GS New Service]: Company continue, company is "+a.newsvc.company+"."),a.newsvc.category?(a.svcSubmit=!0,b=h.get(a.newsvc.category,a.newsvc.subCategory),b.then(function(b){a.svcSubmit=!1,a.gssvc.issueResults=b.data.hits.hits,a.gssvc.issueResults.length&&a.gssvc.issueResults.length>0?console.log("[GS New Service]: Issues: "+a.gssvc.issueResults.length+" issues found for category: "+a.newsvc.category+" and subcategory "+a.newsvc.subCategory+"."):console.log("[GS New Service]: Issues: no issues found."),a.toggleService("issue")},function(b){console.log("[GS New Service]: An error occurred when attempting to get issues, redirect to description page."),a.toggleService("company"),a.svcSubmit=!1})):(console.log("[GS New Service]: Company continue, no category specified."),a.gssvc.issueResults=null,a.gssvc.confResult=null,a.toggleService("issue"))):(console.log("[GS New Service]: Company continue, company is undefined."),a.gssvc.errCompany=!0,a.gssvc.init())},a.gssvc.issueSelect=function(b){return console.log("[GS New Service]: Issue select: "+b+"."),a.newsvc.issue=b,a.newsvc.needs=[],a.newsvc.want=null,a.gssvc.errIssue=!1},a.gssvc.issueSubmit=function(){var b;return console.log("[GS New Service]: Issue continue."),console.log(a.newsvc),a.gssvc.errIssue=!1,a.gssvc.errDescription=!1,a.newsvc.description?a.newsvc.id?a.newsvc.issue?a.gssvc.getConfirmation():a.toggleService("resolution"):(a.svcSubmit=!0,b=i.save(a.newsvc),b.then(function(b){console.log("[GS New Service]: New Service created successfully."),a.newsvc.id=b.data.id,a.gssvc.email="support+id"+a.newsvc.id+"@getservice.com",a.newsvc.issue?a.gssvc.getConfirmation():(a.svcSubmit=!1,a.toggleService("resolution"))},function(b){a.gssvc.submitErr(b),a.svcSubmit=!1})):(a.gssvc.errDescription=!0,console.log("[GS Issue Submit]: Error, no description found."))},a.gssvc.wantSelect=function(b){return console.log("[GS New Service]: Want select: "+b+"."),a.newsvc.want=b},a.gssvc.confSubmit=function(){return console.log(a.newsvc),a.toggleService("resolution")},a.gssvc.copyEmailCallback=function(){return a.gssvc.copyTxt="Copied"},a.gssvc.getConfirmation=function(){var b;return console.log("[GS New Service]: get confirmation fields."),b=h.getConfirmation(a.newsvc.category,a.newsvc.subCategory,a.newsvc.issue),b.then(function(b){var c;c=b.data.hits.hits,a.svcSubmit=!1,a.gssvc.confResults=c&&c[0]&&c[0]._source?c[0]._source:{},a.gssvc.confResults.Needs&&a.gssvc.confResults.Needs.length>0||a.gssvc.confResults.Wants&&a.gssvc.confResults.Wants.length>0?(console.log("[GS New Service]: Issue confirmation fields found, show confirmation page."),angular.forEach(a.gssvc.confResults.Needs,function(b,c){var d;return b.length>0?(d=b.replace(/\s+/g,""),a.newsvc.needs[d]=null):void 0}),a.toggleService("resolution"),a.gssvc.copyTxt="Copy Email"):(console.log("[GS New Service]: Issue confirmation search, no items found for category: "+a.newsvc.category+", resolution screen."),a.toggleService("resolution"))},function(b){console.log("[GS New Service]: An error occurred when attempting to get issues, redirect to description page."),a.toggleService("issues"),a.svcSubmit=!1})},a.gssvc.submitErr=function(b){var c;return c=b&&b.data&&b.data.description?"Error: "+b.data.description:"There was a problem with your request, please try again later.",a.gssvc.error=c},a.gssvc.associateTicket=function(b,c,d){var e;return e=l.set(b,c),e.then(function(b){console.log("[GS New Service]: User associated with new service request successfully."),d?a.toggleService("thanks"):a.toggleService("confirmation"),i.queue=null,a.svcSubmit=!1},function(b){a.gssvc.submitErr(b),a.svcSubmit=!1})},a.gssvc.resSubmit=function(){var b;return console.log(a.newsvc),console.log("[GS New Service]: New service issue submitted."),a.svcSubmit=!0,a.gssvc.authSubmitBtn="Submit",b=i.update(a.newsvc),b.then(function(b){var c,d;console.log("[GS New Service]: New Service submitted successfully with the following details: ",b),console.log(a.newsvc),a.uploadedFiles={},a.auth&&a.auth.loggedIn?(d=a.newsvcNeeds()?!1:!0,a.gssvc.associateTicket(a.auth.id,a.newsvc.id,d)):(c={id:a.newsvc.id,company:a.newsvc.company,category:a.newsvc.category},console.log("add queue"),console.log(c),a.hideService(),a.svcSubmit=!1,i.addQueue(c),a.openLogin("create"))},function(b){a.gssvc.submitErr(b),a.svcSubmit=!1})},a.gssvc.sendReferral=function(){return a.gssvc.referral.value?(console.log("[GS New Service]: Send referral."),console.log(a.gssvc.referral)):void 0},a.newsvcNeeds=function(){return Object.keys(a.newsvc.needs).length>0?!0:!1},a.newsvcUploads=function(){return Object.keys(a.uploadedFiles).length>0?!0:!1},a.submitConfirmation=function(){var b;return a.newsvcUploads()?(a.svcSubmit=!0,b=i.update(a.newsvc),b.then(function(b){console.log("[GS New Service]: New Service submitted successfully with the following details: ",b),console.log(a.newsvc),a.uploadedFiles={},a.gssvc.associateTicket(a.auth.id,a.newsvc.id,!0)},function(b){console.log("[GS New Service]: There was an error adding confirmation attachments."),a.gssvc.submitErr(b),a.svcSubmit=!1})):a.toggleService("thanks")},a.submitUTM=function(){var b;return"Other"!==a.newsvc.utm_source&&(a.newsvc.referral_other=null),a.newsvc.utm_source?(a.submitThanks=!1,a.svcSubmit=!0,b=i.update(a.newsvc),b.then(function(b){console.log("[GS New Service]: New Service submitted successfully with the following details: ",b),a.submitThanks=!0,a.svcSubmit=!1,a.gssvc.referrerSubmit=!0,a.gotoCase(a.newsvc.id)},function(b){console.log("[GS New Service]: There was an error adding a referrer."),a.gssvc.submitErr(b),a.submitThanks=!1,a.svcSubmit=!1})):(console.log("[GS New Service]: No referrer selected, go directly to case."),a.gotoCase(a.newsvc.id))},b.$on("resetNewSvc",function(b,c){a.gssvc.reset()}),a.uploadedFiles={},a.confFiles=[],a.uploadDisable=!1,a.upload=function(b){var c;console.log("[New Service]: Attach file."),b&&!a.uploadDisable&&(a.uploadDisable=!0,a.svcSubmit=!0,a.fileProgress=0,c=Object.keys(a.uploadedFiles).length,n.upload({url:"https://api.getservice.com/zd/upload",file:b,dataType:"json"}).progress(function(b){console.log("[New Service]: upload processing."),a.fileProgress=parseInt(100*b.loaded/b.total)+"%",a.uploadedFiles[c]={name:b.config.file.name,token:null}}).success(function(b,d,e,f){console.log("[New Service]: upload complete."),a.uploadDisable=!1,a.svcSubmit=!1,a.fileProgress=0,a.uploadedFiles[c].token=b.upload_token,a.newsvc.upload_tokens.push(b.upload_token),console.log(a.newsvc)}).error(function(b,c,d,e){console.log("[New Service]: upload error."),a.uploadDisable=!1,a.svcSubmit=!1,a.fileProgress=0}))},a.removeUpload=function(b,c){var d;return console.log(a.uploadedFiles),console.log("****** remove upload"),console.log(b),console.log(c),delete a.uploadedFiles[b],angular.forEach(a.newsvc.upload_tokens,function(b,d){return b===c?a.newsvc.upload_tokens.splice(d,1):void 0}),d=o.remove(c),d.then(function(a){console.log("[GS New Service]: Removed file from database.")},function(a){console.log("[GS New Service]: Error removing file from database.")})},b.$on("CLOSE_SVC",function(b){return a.gssvc.reset()}),a.$on("COMPANY_SELECT",function(b,c,d,e,f,g){return console.log("[GS New Service]: company selected"+c+", with an id of "+d+"."),a.gssvc.issueResults=null,a.gssvc.companyResults=null,a.gssvc.companyResultsNew=!1,a.gssvc.confResults=null,a.gssvc.model(),a.newsvc.needs=[],a.newsvc.company=c,a.newsvc.companyId=d,a.newsvc.category=e,a.newsvc.subCategory=g,a.gssvc.issueResults=f,console.log("**** data passed to new service modal *****"),console.log(a.newsvc,a.gssvc.issueResults)})}])}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("LoginCtrl",["$scope","$rootScope","$location","$cookies","$state","gssvcnew","gsregister","gslogin","gspassword","gsassociate","gsgetemail","gsgoogle",function(a,b,c,d,e,f,g,h,i,j,k,l){return b.$on("newsvcQueue",function(b){return a.newsvcQueue=f.queue,a.submitReg=f.queue&&f.queue.id?"Create an account & finish!":"Register",a.showBackBtn=!0}),b.$on("CLEAR_QUEUE",function(b){return a.showBackBtn=!1}),a.clearErrors=function(){return a.gsreg.errEmail=!1,a.gsreg.errPassword=!1,a.gslogin.errUsername=!1,a.gslogin.errPassword=!1,a.loginSuccess=null,a.loginError=null,a.submitReg=f.queue&&f.queue.id?"Create an account & finish!":"Register",a.submitLogin="Login"},a.clearGsReg=function(){return a.gsreg={username:null,name:null,password:null},a.gsguest={email:null}},a.loginInit=function(){return a.gsforms={},a.gslogin={username:null,password:null},a.clearGsReg(),a.newsvcQueue=f.queue,a.disableReg=!1,a.disableLogin=!1,a.disableGuest=!1,a.showBackBtn=!1,a.clearErrors(),a.submitReg=f.queue&&f.queue.id?"Create an account & finish!":"Register"},a.loginInit(),a.resetForms=function(){"[GS Login]: Reset Forms.";return angular.forEach(a.gsforms,function(b,c){b&&a.gsforms[c].$setPristine()})},a.resetLogin=function(){return a.loginInit(),a.resetForms(),a.hideLogin()},a.closeLogin=function(){return a.showBackBtn=!1,a.closeConfirm(!0)},a.toggleLoginReset=function(b){return a.clearErrors(),a.toggleLogin(b)},a.setTokens=function(a,b,c){return d.put("gs.id",a,365),d.put("gs.t",b,365),d.put("gs.n",c,365)},a.login=function(){var b;return console.log("[GS Login]: Login()"),a.clearErrors(),a.gslogin.username&&a.gslogin.password?(console.log("[GS Login]: Valid input"),a.disableLogin=!0,b=h.submit(a.gslogin.username,a.gslogin.password),b.then(function(b){var c,d;console.log("[GS Login]: Login successful."),d=b.data.access_token,c=k.get(a.gslogin.username),c.then(function(b){var c;console.log("[GS Login]: Get user details."),d&&b.data&&b.data[0]?(a.setTokens(window.btoa(b.data[0].id),d,window.btoa(b.data[0].name)),a.checkLogin(),c=f.queue,c&&c.id?a.associateTicket(b.data[0].id,c.id):(a.resetLogin(),a.disableLogin=!1),h.redirectPath&&(e.go("messages.id",{id:h.redirectPath}),h.redirectPath=null)):(console.log("Error retreiving user information, logout."),a.registerError(),a.disableLogin=!1),a.clearErrors()},function(){console.log("Error retreiving user information, logout."),a.logout(),h.logout(),a.disableLogin=!1,a.clearErrors(),a.registerError()})},function(b){var c;c=b&&b.data&&b.data.description?"Error: "+b.data.description:"",a.registerError(c),a.disableLogin=!1})):(console.log("[GS Login]: Validation failed."),a.gslogin.username?a.gslogin.errUsername=!1:a.gslogin.errUsername=!0,!a.gslogin.password||a.gslogin.password.length<5?a.gslogin.errPassword=!0:a.gslogin.errPassword=!1)},a.setPassword=function(b,c){var d;return console.log("[GS Set Password]: set()."),d=i.set(b,c),d.then(function(c){var d;console.log("[GS Set Password]: Password set successfully for userID: "+b),a.clearErrors(),d=f.queue,console.log("queued ticket id: "+d.id),d&&d.id?a.associateTicket(c.data.id,d.id):a.registerSuccess()},function(b){var c;c=b&&b.data&&b.data.description?"Error: "+b.data.description:"",a.clearErrors(),a.registerError(c)})},a.associateTicket=function(b,c){var d;return console.log("[GS Login/Register]: Associate pending ticket to user."),d=j.set(b,c),d.then(function(b){console.log("[GS Register]: User associated with new service request successfully."),a.registerSuccess(c)},function(b){var c;c=b&&b.data&&b.data.description?"Error: "+b.data.description:"",a.registerError(c)})},a.registerDone=function(c){return console.log("[GS Register]: Register done."),c&&(a.openService(),a.clearGsReg(),a.resetForms(),f.queue&&"Travel"===f.queue.category?a.toggleService("confirmation"):a.toggleService("thanks")),f.queue={},b.$broadcast("CLEAR_QUEUE"),a.resetLogin()},a.registerSuccess=function(b){var c;return console.log("[GS Register]: Register success."),a.clearErrors(),a.submitReg=f.queue&&f.queue.id?"Fix it, Please!":"Submit",a.newsvcQueue={},a.loginSuccess="Your account was created successfully.",a.gsreg.email&&a.gsreg.password?(c=h.submit(a.gsreg.email,a.gsreg.password),c.then(function(c){var d,e,f;return console.log("[GS Login]: Auto login successful."),d=c,f=c.data.access_token,e=k.get(a.gsreg.email),e.then(function(c){f&&c.data&&c.data[0]&&(a.setTokens(window.btoa(c.data[0].id),f,window.btoa(c.data[0].name)),a.checkLogin(),a.disableReg=!1,a.registerDone(b))},function(b){var c;c=b&&b.data&&b.data.description?"Error: "+b.data.description:"",a.registerError(c)})},function(b){var c;c=b&&b.data&&b.data.description?"Error: "+b.data.description:"",a.registerError(c)})):(a.disableReg=!1,b?a.registerDone(b):void 0)},a.registerError=function(b){return a.clearErrors(),a.submitReg=f.queue&&f.queue.id?"Fix it, Please!":"Submit",a.disableReg=!1,a.submitGuest="Submit",a.disableGuest=!1,a.loginError="There was a problem with your request, please try again later. "+b},a.registerUser=function(b){var c;return c=g.save(b),c.then(function(b){var c;console.log("[GS Register]: user registration successful."),b.data.id&&a.gsreg.password?a.setPassword(b.data.id,a.gsreg.password):(c=f.queue,c&&c.id?(console.log("[GS Register]: queued ticket found."),a.associateTicket(b.data.id,c.id)):a.registerSuccess())},function(b){var c;c=b&&b.data&&b.data.description?"Error: "+b.data.description:"",a.registerError(c)})},a.register=function(){var b;return console.log("[GS Register]: Register()"),a.clearErrors(),a.disableReg=!0,a.gsreg.email&&a.gsreg.password&&a.gsreg.password.length>=5?a.gsreg.password?(console.log("password specified"),b=k.get(a.gsreg.email),b.then(function(b){var c;if(b.data&&b.data[0]){if(b.data[0].created_at!==b.data[0].updated_at)return console.log("[GS Register]: Matching legacy user found, auto login."),a.gslogin.username=a.gsreg.email,a.gslogin.password=a.gsreg.password,a.clearGsReg(),void a.login();console.log("[GS Register]: Matching legacy user found, set password."),c=i.set(b.data[0].id,a.gsreg.password),c.then(function(b){var c;c=f.queue,c&&c.id?(console.log("[GS Register]: queued ticket found."),a.associateTicket(b.data.id,c.id)):a.registerSuccess()},function(b){var c;c=b&&b.data&&b.data.description?"Error: "+b.data.description:"",a.registerError(c)})}else console.log("[GS Register]: register new user"),a.registerUser(a.gsreg)},function(b){var c;c=b&&b.data&&b.data.description?"Error: "+b.data.description:"",a.registerError(c)})):a.registerUser(a.gsreg):(a.gsreg.email?a.gsreg.errEmail=!1:a.gsreg.errEmail=!0,!a.gsreg.password||a.gsreg.password.length<5?a.gsreg.errPassword=!0:a.gsreg.errPassword=!1,a.disableReg=!1)}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("ContactCtrl",["$scope","$location","gscontactus",function(a,b,c){return console.log("[GS Service]: Contact page."),a.loc=b.$$path,a.svcContact={},a.showContactForm=!0,a.contact={name:null,email:null,phone:null,subject:null,message:null},a.contactSubmit=function(){var b;return a.contact.email?a.errEmail=!1:a.errEmail=!0,a.contact.message?a.errMessage=!1:a.errMessage=!0,a.errEmail||a.errMessage?void 0:(console.log("[Contact Us]: send()."),b=c.send(a.contact.name,a.contact.email,a.contact.phone,a.contact.subject,a.contact.message),b.then(function(b){console.log("[Contact Us]: successfully send for email: "+a.contact.email),a.showContactForm=!1},function(b){var c;c=b&&b.data&&b.data.description?"Error: "+b.data.description:"",a.registerError(c)}))}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("ConfirmCtrl",["$scope","$modalInstance","gssvcnew",function(a,b,c){return c.queue&&c.queue.id?a.pendingTicket=c.queue.id:a.pendingTicket=!1,a.cancelClose=function(){return b.dismiss("cancel")},a.confirmClose=function(){return b.close(!0)}}])}.call(this),function(){"use strict";angular.module("getserviceioApp").controller("PrivacyTermsCtrl",["$scope","$location",function(a,b){return console.log("[GS Service]: Privacy Policy/Terms of Service page."),a.loc=b.$$path}])}.call(this),function(){"use strict";angular.module("getserviceioApp").directive("gsappready",function(){return{restrict:"A",priority:-1e3,link:function(a,b,c){b.removeClass("gs-cloak")}}})}.call(this);